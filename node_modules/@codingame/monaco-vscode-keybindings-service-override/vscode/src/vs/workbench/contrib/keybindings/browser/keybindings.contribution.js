import * as nls from 'monaco-editor/esm/vs/nls.js';
import { registerAction2, Action2 } from 'monaco-editor/esm/vs/platform/actions/common/actions.js';
import { IKeybindingService } from 'monaco-editor/esm/vs/platform/keybinding/common/keybinding.js';
import { Categories } from 'monaco-editor/esm/vs/platform/action/common/actionCommonCategories.js';
import { ICommandService } from 'monaco-editor/esm/vs/platform/commands/common/commands.js';
import { showWindowLogActionId } from 'vscode/vscode/vs/workbench/services/log/common/logConstants';

class ToggleKeybindingsLogAction extends Action2 {
    constructor() {
        super({
            id: 'workbench.action.toggleKeybindingsLog',
            title: { value: ( nls.localizeWithPath(
                'vs/workbench/contrib/keybindings/browser/keybindings.contribution',
                'toggleKeybindingsLog',
                "Toggle Keyboard Shortcuts Troubleshooting"
            )), original: 'Toggle Keyboard Shortcuts Troubleshooting' },
            category: Categories.Developer,
            f1: true
        });
    }
    run(accessor) {
        const logging = accessor.get(IKeybindingService).toggleLogging();
        if (logging) {
            const commandService = accessor.get(ICommandService);
            commandService.executeCommand(showWindowLogActionId);
        }
    }
}
registerAction2(ToggleKeybindingsLogAction);
